<h1>{{message}}</h1>

<form onSubmit="addMessage();return false">
  <label for="title">Titulo</label>
  <input type="text"  name="title" id="title" >
  <label for="price">Precio</label>
  <input type="text"  name="price" id="price" >
  <label for="thumbnail">Imagen</label>
  <input type="text"  name="thumbnail" id="thumbnail" >
  <input type="submit" value="Agregar">
</form>

<fieldset>
  <h1>Productos ingresados</h1>
  <ul id="products"></ul>
</fieldset>

<script>

    const socket = io()

    socket.on('messageBack',(data)=>{
      console.log('Recibida desde backend: ',data)
      let innerText =''
      data.map((product)=>{
        innerText+=`
        <li>
          <div>Titulo: ${product.title}</div>
          <div>Precio: $${product.price}</div>
          <div>Imagen:
            <img src="${product.thumbnail}" alt="">
          </div>
        </li>
        `
      })
      document.getElementById('products').innerHTML= innerText
    })

    socket.on('mensajeConexion',(data)=>{
      console.log(data)
      alert(data)
      socket.emit('mensajeRespuesta','Muchas gracias!')
    })

    function addMessage(){
      const title = document.getElementById('title').value
      const price = document.getElementById('price').value
      const thumbnail = document.getElementById('thumbnail').value
      console.log(title, price)
      socket.emit('messageFront',{
        title,
        price,
        thumbnail    
     })
      document.getElementById('message').value=''
    }
  </script>
